(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={section:"burger-ingredients_section__2O_VM"}},101:function(e,t,n){e.exports={list:"ingredients-list_list__3ZGqq"}},102:function(e,t,n){e.exports={"section-list":"ingredients-section_section-list__2yLMe"}},105:function(e,t,n){e.exports={tabs:"ingredients-tabs_tabs__yMieN"}},106:function(e,t,n){e.exports={list:"optional-components-list_list__2M2oS",dragIcon:"optional-components-list_dragIcon__2YfLq"}},108:function(e,t,n){e.exports={wrap:"constructor-total_wrap__3IxDh"}},116:function(e,t,n){},18:function(e,t,n){e.exports={container:"opened-order-details_container__1n9NY",imgContainer:"opened-order-details_imgContainer___Mvs1",center:"opened-order-details_center__1INS5",ingredientContainer:"opened-order-details_ingredientContainer__1vvbN",fullWidth:"opened-order-details_fullWidth__1U-Ib",ingredientText:"opened-order-details_ingredientText__Ms5Ds",quantity:"opened-order-details_quantity__1Xcpa",list:"opened-order-details_list__3i2Iz"}},195:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(30),s=n.n(c),i=(n(116),n(41)),o=n.n(i),d=n(4),u=n(6),l=n(69),j=n.n(l),m=n(10),p=n(0),b=function(e){var t=e.title,n=e.to,r=Object(m.h)().pathname,a="/"===n&&n===r||"/"!==n&&r.startsWith(n),c={},s=a?"primary":"secondary",i=!a&&j.a.unselected;switch(t){case"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440":c=Object(p.jsx)(d.BurgerIcon,{type:s});break;case"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442":c=Object(p.jsx)(d.ProfileIcon,{type:s});break;case"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432":c=Object(p.jsx)(d.ListIcon,{type:s})}return Object(p.jsxs)(u.b,{to:n,className:"".concat(j.a.link," text text_type_main-default mt-4 ml-4"),children:[c,Object(p.jsx)("span",{className:"text text_type_main-default ".concat(i),children:t})]})};function O(){return Object(p.jsx)("header",{children:Object(p.jsxs)("nav",{className:o.a.nav,children:[Object(p.jsxs)("div",{className:o.a.navContainer,children:[Object(p.jsx)(b,{title:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",to:"/"}),Object(p.jsx)(b,{title:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",to:"/feed"})]}),Object(p.jsx)("div",{className:o.a.logo,children:Object(p.jsx)(u.b,{to:"/",children:Object(p.jsx)(d.Logo,{})})}),Object(p.jsx)("div",{className:o.a.navContainer,children:Object(p.jsx)(b,{title:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",to:"/profile"})})]})})}var f=n(96),x=n.n(f),h=n(42),_=n.n(h),g=function(e){var t=e.title,n=e.children,r=e.hideCloseButton,a=e.closeHandler;return Object(p.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:_.a.wrap,children:Object(p.jsxs)("div",{className:_.a.modal+" pr-10 pl-10 pt-10 pb-15",children:[Object(p.jsxs)("div",{className:r?_.a.modalHeadTitle:_.a.modalHeadWithClose,children:[Object(p.jsx)("span",{className:"text text_type_main-medium ",children:t}),r?null:Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(d.CloseIcon,{onClick:a,type:"primary"})})]}),n]})})},y=document.getElementById("react-modals"),v=function(e){var t=e.title,n=e.children,r=e.closeHandler,c=e.hideCloseButton,i=a.a.useCallback((function(e){"Escape"===e.key&&r(e)}),[r]);return a.a.useEffect((function(){return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}})),s.a.createPortal(Object(p.jsx)("div",{className:x.a.overlay,onClick:r,children:Object(p.jsx)(g,{title:t,children:n,closeHandler:r,hideCloseButton:c})}),y)},N=n(23),C=function(){return Object(N.b)()},w=N.c,E=function(){var e=w((function(e){return e.ingredients.orderNumber})),t=w((function(e){return e.ingredients.orderFailed})),n=w((function(e){return e.ingredients.orderRequest})),r=w((function(e){return e.ingredients.orderFailedMessage}));return Object(p.jsx)(p.Fragment,{children:n?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("p",{className:"text text_type_main-medium pt-8 pb-15",children:"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0430..."})}):t?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{className:"text text_type_main-medium pt-8 pb-15",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(p.jsx)("p",{className:"text text_type_main-default pt-15 pb-2",children:r})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{className:"text text_type_digits-large",children:e}),Object(p.jsx)("p",{className:"text text_type_main-medium pt-8 pb-15",children:"\u0418\u043d\u0434\u0435\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(p.jsx)(d.CheckMarkIcon,{type:"primary"}),Object(p.jsx)("p",{className:"text text_type_main-default pt-15 pb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})},S="https://norma.nomoreparties.space/api/orders",k="https://norma.nomoreparties.space/api",T="wss://norma.nomoreparties.space/orders";function R(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));if(t)return decodeURIComponent(t[1])}function I(e,t){var n=e+"="+(t=encodeURIComponent(t));document.cookie=n}var D="GET_INGREDIENTS_REQUEST",P="GET_INGREDIENTS_SUCCESS",F="GET_INGREDIENTS_FAILED",M="ADD_COMPONENT",q="REMOVE_COMPONENT",L="SHOW_ORDER_MODAL",H="CREATE_ORDER_REQUEST",B="CREATE_ORDER_SUCCESS",U="CREATE_ORDER_FAILED",A="CLEAN_CONSTRUCTOR",z="UPDATE_OPTIONAL",W="UPDATE_CURRENT_TAB",G="GET_ORDER_REQUEST",J="GET_ORDER_SUCCESS",Q="GET_ORDER_FAILED";function Y(e){return function(t){t({type:G}),fetch("".concat(S,"/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){e.success&&t({type:J,order:e.orders[0]})})).catch((function(e){t({type:Q,message:e.message})}))}}var V=n(9),X=n.n(V),K=n(16),Z=function(){var e=Object(K.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/auth/login"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(K.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/auth/register"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(K.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/password-reset"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(K.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/password-reset/reset"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(K.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R("token"),e.next=3,fetch("".concat(k,"/auth/user"),{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},redirect:"follow",referrerPolicy:"no-referrer"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(K.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(JSON.stringify(t)),e.next=3,fetch("".concat(k,"/auth/user"),{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+R("token")},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(K.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/auth/token"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:localStorage.getItem("token")})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(K.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/auth/logout"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:localStorage.getItem("token")})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se="SET_USER",ie="SET_CHANGING_PASSWORD",oe="USER_REQUIRED",de="USER_LOADED",ue="SHOW_MESSAGE",le="SET_MESSAGE";function je(e,t){return function(){var n=Object(K.a)(X.a.mark((function n(r){var a;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a="login"===t?Z:$,n.abrupt("return",a(e).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){if(e.success)return I("token",e.accessToken.split("Bearer ")[1]),localStorage.setItem("token",e.refreshToken),r({type:se,user:e.user})})).catch((function(e){r({type:ue,message:e.message})})));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function me(){return function(e){return e({type:oe}),ne().then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){t.success?(e({type:se,user:t.user}),e({type:de})):Promise.reject(t)})).catch((function(t){if("jwt expired"===t.message)return e(pe(me()));e({type:de})}))}}var pe=function(e){return function(t){return ae().then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(n){if(console.log(n),n.success)return I("token",n.accessToken.split("Bearer ")[1]),localStorage.setItem("token",n.refreshToken),t(e);Promise.reject(n)})).catch((function(e){t({type:se,user:void 0}),t({type:de})}))}};function be(){return function(e){ce().then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(t){e({type:ue,message:t.message})})).finally((function(){e({type:se,user:void 0}),I("token",""),localStorage.removeItem("token")}))}}function Oe(){var e=w((function(e){return e.auth.authMessage}));return Object(p.jsx)("p",{className:"text text_type_main-default pt-15 pb-2",children:e})}var fe=n(20),xe=n(2),he=n(11),_e=n(5),ge=n.n(_e);function ye(){var e=Object(r.useState)({email:"",password:""}),t=Object(he.a)(e,2),n=t[0],a=t[1],c=function(e){a(Object(xe.a)(Object(xe.a)({},n),{},Object(fe.a)({},e.target.name,e.target.value)))},s=C(),i=Object(r.useCallback)((function(e){e.preventDefault(),s(je(n,"login"))}),[s,n]);return Object(p.jsxs)("div",{className:ge.a.formContainer,children:[Object(p.jsxs)("form",{className:ge.a.form+" pb-20",onSubmit:i,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(p.jsx)(d.Input,{type:"text",size:"default",value:n.email,name:"email",placeholder:"e-mail",onChange:c}),Object(p.jsx)(d.PasswordInput,{onChange:c,value:n.password,name:"password"}),Object(p.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(p.jsxs)("p",{className:"text text_type_main-default",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(p.jsx)(u.b,{className:ge.a.link,to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("p",{className:"text text_type_main-default",children:[" \u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(p.jsx)(u.b,{className:ge.a.link,to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]})]})}function ve(){var e=Object(r.useState)({name:"",email:"",password:""}),t=Object(he.a)(e,2),n=t[0],a=t[1],c=C(),s=Object(m.g)(),i=function(e){a(Object(xe.a)(Object(xe.a)({},n),{},Object(fe.a)({},e.target.name,e.target.value)))},o=Object(r.useCallback)((function(e){e.preventDefault(),c(je(n,"register")),s.push("/")}),[c,n]);return Object(p.jsxs)("div",{className:ge.a.formContainer,children:[Object(p.jsxs)("form",{className:ge.a.form+" pb-20",onSubmit:o,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)(d.Input,{type:"text",size:"default",value:n.name,name:"name",placeholder:"\u0418\u043c\u044f",onChange:i}),Object(p.jsx)(d.Input,{type:"text",size:"default",value:n.email,name:"email",placeholder:"e-mail",onChange:i}),Object(p.jsx)(d.PasswordInput,{onChange:i,value:n.password,name:"password"}),Object(p.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("p",{className:"text text_type_main-default",children:["\u0412\u044b \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(p.jsx)(u.b,{className:ge.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}var Ne=function(){var e=w((function(e){return e.auth.user})),t=Object(r.useState)({email:""}),n=Object(he.a)(t,2),a=n[0],c=n[1],s=w((function(e){return e.auth.changingPassword})),i=C();return e?Object(p.jsx)(m.a,{to:"/"}):Object(p.jsxs)("div",{className:ge.a.formContainer,children:[!s&&Object(p.jsxs)("form",{className:ge.a.form+" pb-20",onSubmit:function(e){e.preventDefault(),i(function(e){return function(t){ee(e).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){if(e.success)return t({type:ie})})).catch((function(e){t({type:ue,message:e.message})}))}}(a))},children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(d.Input,{type:"text",size:"default",value:a.email,name:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){c(Object(xe.a)(Object(xe.a)({},a),{},Object(fe.a)({},e.target.name,e.target.value)))}}),Object(p.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),s&&Object(p.jsx)(u.b,{className:"mb-10",to:"/reset-password",children:Object(p.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0414\u0430\u043b\u0435\u0435"})}),Object(p.jsxs)("p",{className:"text text_type_main-default",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(p.jsx)(u.b,{className:ge.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})};function Ce(){var e=Object(r.useState)({password:"",code:""}),t=Object(he.a)(e,2),n=t[0],a=t[1],c=C(),s=w((function(e){return e.auth.changingPassword})),i=function(e){a(Object(xe.a)(Object(xe.a)({},n),{},Object(fe.a)({},e.target.name,e.target.value)))},o=Object(r.useCallback)((function(e){e.preventDefault(),c(function(e){return function(t){te(e).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){e.success&&t({type:ie})})).catch((function(e){t({type:ue,message:e.message})}))}}(n))}),[c,n]);return Object(p.jsxs)(p.Fragment,{children:[" ",s?Object(p.jsxs)("div",{className:ge.a.formContainer,children:[Object(p.jsxs)("form",{className:ge.a.form+" pb-20",onSubmit:o,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(d.PasswordInput,{onChange:i,value:n.password,name:"password"}),Object(p.jsx)(d.Input,{type:"text",size:"default",value:n.code,name:"code",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:i}),Object(p.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(p.jsxs)("p",{className:"text text_type_main-default",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(p.jsx)(u.b,{className:ge.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(p.jsx)(m.a,{to:{pathname:"/forgot-password"}})]})}var we=n(72),Ee=n.n(we);function Se(){var e=w((function(e){return e.auth.user})),t=Object(r.useState)({email:"",password:"",name:""}),n=Object(he.a)(t,2),a=n[0],c=n[1],s=C(),i=function(e){c(Object(xe.a)(Object(xe.a)({},a),{},Object(fe.a)({},e.target.name,e.target.value)))};return Object(r.useEffect)((function(){c({email:e.email,password:"",name:e.name})}),[e]),Object(p.jsxs)("form",{className:Ee.a.form+" pb-20",onSubmit:function(e){e.preventDefault(),s(function(e){return function(t){re(e).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){t({type:se,user:e.user}),t({type:ue,message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b"})})).catch((function(e){t({type:ue,message:e.message})}))}}(a))},children:[Object(p.jsx)(d.Input,{type:"text",size:"default",value:a.name,name:"name",placeholder:"\u0418\u043c\u044f",onChange:i}),Object(p.jsx)(d.Input,{type:"text",size:"default",value:a.email,name:"email",placeholder:"e-mail",onChange:i}),Object(p.jsx)(d.PasswordInput,{onChange:i,value:a.password,name:"password"}),Object(p.jsxs)("div",{className:Ee.a.buttonContainer,children:[Object(p.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(p.jsx)(d.Button,{onClick:function(){c({email:e.email,password:"",name:e.name})},type:"primary",size:"medium",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})}var ke=function(){var e=Object(m.g)(),t=C();return Object(p.jsx)("div",{children:Object(p.jsx)(d.Button,{onClick:function(){t(be()),e.push("/")},type:"primary",size:"medium",children:"\u0412\u044b\u0439\u0442\u0438"})})},Te=n(97),Re=n.n(Te),Ie=n(73),De=n.n(Ie),Pe=n(33),Fe=n.n(Pe),Me=n(74),qe=n.n(Me);function Le(e){var t=new Date(e),n=t.getMonth(),r=t.getDate();if(n<(new Date).getMonth()||(new Date).getDate()-r>7)return qe()(t).format("DD/MM/YYYY HH:mm [i-GMT]Z");var a=t.getDay(),c=(new Date).getDay()-a,s="";switch(!0){case 1===(c=c>=0?c:c+7):s="\u0412\u0447\u0435\u0440\u0430";break;case 0===c:s="\u0421\u0435\u0433\u043e\u0434\u043d\u044f";break;case c>1&&c<5:s=c+" \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434";break;default:s=c+" \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434"}return s+qe()(t).format(", HH:mm [i-GMT]Z")}function He(e,t){var n=[];return e.forEach((function(e){var r=n.findIndex((function(t){return t._id===e}));if(-1===r){var a=t.find((function(t){return t._id===e}));n.push(Object(xe.a)(Object(xe.a)({},a),{},{qty:1}))}else{var c=n[r];c.qty&&c.qty++}})),n}function Be(e){return e.reduce((function(e,t){return t.qty?e+t.price*t.qty:e}),0)}var Ue=function(e){var t=e.orderIngredients,n=w((function(e){return e.ingredients.ingredients}));if(0===n.length)return Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u043e\u0432"});var r=He(t,n),a=r.length>6?r.slice(0,6):r,c=Be(r);return Object(p.jsxs)("div",{className:Fe.a.footer,children:[Object(p.jsxs)("div",{className:Fe.a.imgsList,children:[r.length>6&&Object(p.jsxs)("span",{className:Fe.a.rest+" text text_type_digits-default",children:["+",r.length-6]}),a.map((function(e,t){return Object(p.jsx)("img",{style:{zIndex:t+1},className:"".concat(Fe.a.imgContainer," ").concat(r.length>6&&0===t&&Fe.a.notLast),alt:"img",src:e.image_mobile},e._id+t)}))]}),Object(p.jsx)("div",{children:Object(p.jsxs)("span",{className:"text text_type_digits-medium",children:[c,Object(p.jsx)(d.CurrencyIcon,{type:"primary"})]})})]})},Ae=function(e){var t="",n="";switch(e.status){case"done":t="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e",n=" success-text";break;default:t="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}return Object(p.jsx)("p",{className:"text text_type_main-default"+n,children:t})},ze=function(e){var t,n=e.order,r=e.showStatus,a=Object(m.h)(),c=Le(n.createdAt),s=n.ingredients.filter((function(e){return e}));return Object(p.jsx)(u.b,{className:"link-drop-style",to:{pathname:"".concat(a.pathname,"/").concat(n.number),state:{background:a}},children:Object(p.jsxs)("div",{className:De.a.mainContainer+" p-6 m-4",children:[Object(p.jsxs)("div",{className:De.a.header,children:[Object(p.jsxs)("p",{className:"text text_type_main-medium",children:["#",n.number]}),Object(p.jsx)("p",{className:"text text_type_main-default gray-text",children:c})]}),Object(p.jsx)("p",{className:"text text_type_main-medium",children:n.name}),r&&Object(p.jsx)(Ae,{status:n.status}),0===(null===(t=n.ingredients)||void 0===t?void 0:t.length)||0===s.length?Object(p.jsx)("p",{children:"\u0412 \u0437\u0430\u043a\u0430\u0437\u0435 \u043d\u0435\u0442 \u0438\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u043e\u0432"}):Object(p.jsx)(Ue,{orderIngredients:s})]})})},We=function(e){var t=e.orders,n=e.showStatus;return Object(p.jsx)(p.Fragment,{children:t&&t.length>0?Object(p.jsx)("ul",{className:Re.a.ordersList+" scrollable",children:t.map((function(e){return Object(p.jsx)(ze,{order:e,showStatus:n},e._id)}))}):Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0417\u0430\u043a\u0430\u0437\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"})})},Ge="WS_COMMON_ORDERS_CONNECTION_START",Je="WS_USER_ORDERS_CONNECTION_START",Qe="WS_CONNECTION_SUCCESS",Ye="WS_CONNECTION_ERROR",Ve="WS_CONNECTION_CLOSE",Xe="WS_CONNECTION_CLOSED",Ke="WS_GET_COMMON_ORDERS",Ze="WS_GET_USER_ORDERS",$e=function(){var e=C(),t=w((function(e){return e.ws})),n=t.wsConnected,a=t.code,c=t.error,s=t.userOrders;Object(r.useEffect)((function(){return e({type:Je}),function(){e({type:Ve})}}),[e]);var i=(null===s||void 0===s?void 0:s.orders)?s.orders:[];return Object(p.jsx)(p.Fragment,{children:n?Object(p.jsx)(We,{orders:i,showStatus:!0}):a||c?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"}),Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u043a\u043e\u0434 \u043e\u0448\u0438\u0431\u043a\u0438"+a}),Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435: "+c})]}):Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})};function et(){var e={info:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",orders:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432",logout:"\u0432\u044b\u0445\u043e\u0434 \u0438\u0437 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"},t=Object(r.useState)({name:"info",desc:e.info}),n=Object(he.a)(t,2),a=n[0],c=n[1],s=Object(m.g)(),i=Object(m.i)();Object(r.useEffect)((function(){(null===i||void 0===i?void 0:i.category)&&c({name:i.category,desc:e[i.category]})}),[i]);var o=function(t){c({name:t,desc:e[t]||""}),s.push("/profile/".concat(t))};return Object(p.jsxs)("div",{className:"".concat(ge.a.main," ").concat(ge.a.autoFit," pt-30"),children:[Object(p.jsx)("nav",{className:"".concat(ge.a.navColumn," mr-15"),children:Object(p.jsxs)("ul",{className:ge.a.navContainer,children:[Object(p.jsx)("li",{onClick:function(){return o("info")},className:"text text_type_main-large pb-3 ".concat("info"!==a.name&&ge.a.unselected," ").concat(ge.a.pointer),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(p.jsx)("li",{onClick:function(){return o("orders")},className:"text text_type_main-large pb-3 ".concat("orders"!==a.name&&ge.a.unselected," ").concat(ge.a.pointer),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsx)("li",{onClick:function(){return o("logout")},className:"text text_type_main-large pb-3 ".concat("logout"!==a.name&&ge.a.unselected," ").concat(ge.a.pointer),children:"\u0412\u044b\u0445\u043e\u0434"}),Object(p.jsx)("p",{className:"text text_type_main-default mt-20 gray-text",children:a.desc})]})}),Object(p.jsxs)("section",{className:ge.a.contentSection,children:[Object(p.jsx)(m.b,{path:["/profile","/profile/info"],exact:!0,component:Se}),Object(p.jsx)(m.b,{path:"/profile/orders",exact:!0,component:$e}),Object(p.jsx)(m.b,{path:"/profile/logout",exact:!0,component:ke})]})]})}var tt=n(98),nt=n.n(tt);function rt(){var e=Object(m.i)().id,t=w((function(t){return t.ingredients.ingredients.find((function(t){return t._id===e}))})),n=w((function(e){return e.ingredients.ingredientsRequest})),r=w((function(e){return e.ingredients.ingredientsFailed}));return n?Object(p.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):Object(p.jsx)(p.Fragment,{children:r?Object(p.jsx)("p",{children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}):t?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("img",{alt:t.name,src:t.image}),Object(p.jsx)("p",{className:"text text_type_main-default pt-4",children:t.name}),Object(p.jsxs)("div",{className:nt.a.composition+" pt-8",children:[Object(p.jsxs)("span",{className:"text text_type_main-default",children:["\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b",Object(p.jsx)("br",{}),t.calories]}),Object(p.jsxs)("span",{className:"text text_type_main-default",children:["\u0411\u0435\u043b\u043a\u0438, \u0433",Object(p.jsx)("br",{}),t.proteins]}),Object(p.jsxs)("span",{className:"text text_type_main-default",children:["\u0416\u0438\u0440\u044b, \u0433",Object(p.jsx)("br",{}),t.fat]}),Object(p.jsxs)("span",{className:"text text_type_main-default",children:["\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",Object(p.jsx)("br",{}),t.carbohydrates]})]})]}):Object(p.jsx)("p",{children:"\u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"})})}function at(){return Object(p.jsx)("div",{className:ge.a.center,children:Object(p.jsx)(g,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(p.jsx)(rt,{}),hideCloseButton:!0})})}function ct(){return Object(p.jsx)("div",{className:ge.a.center,children:Object(p.jsx)("p",{className:"text text_type_main-large",children:"404"})})}var st=n(18),it=n.n(st),ot=function(){var e=w((function(e){return e.ingredients.openedOrder})),t=e.openOrderRequest,n=e.openOrderFailed,a=e.openOrderFailedMessage,c=e.order,s=w((function(e){return e.ingredients.ingredients})),i=c,o=Object(m.i)().id,u=C();if(Object(r.useEffect)((function(){u(Y(o))}),[Y,u,o]),!i)return null;var l=[],j=0;i.ingredients&&(j=Be(l=He(i.ingredients,s)));var b=Le(i.createdAt);return Object(p.jsx)("div",{className:it.a.container,children:t?Object(p.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0430"}):n?Object(p.jsxs)("p",{children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",a]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"text text_type_digits-medium mb-10 "+it.a.center,children:["#",i.number]}),Object(p.jsx)("p",{className:"text text_type_main-medium mb-3",children:i.name}),Object(p.jsx)(Ae,{status:i.status}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0421\u043e\u0441\u0442\u0430\u0432"}),Object(p.jsx)("ul",{className:it.a.fullWidth+" scrollable pr-4 mb-10 "+it.a.list,children:l.length>0?l.map((function(e){return Object(p.jsxs)("li",{className:it.a.ingredientContainer+" mb-4",children:[Object(p.jsx)("img",{className:it.a.imgContainer+" mr-4",alt:"img",src:e.image_mobile}),Object(p.jsxs)("div",{className:it.a.fullWidth+" "+it.a.ingredientText,children:[Object(p.jsx)("span",{className:"text text_type_main-default",children:e.name}),Object(p.jsxs)("span",{className:it.a.quantity+" ml-4",children:[Object(p.jsxs)("span",{className:"text text_type_main-default pr-1",children:[e.qty," x ",e.price,"  "]}),Object(p.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]},e._id)})):Object(p.jsx)("p",{children:"\u0418\u043d\u0433\u0435\u0434\u0438\u0435\u043d\u0442\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u044e\u0442"})}),Object(p.jsxs)("div",{className:it.a.ingredientText+" "+it.a.fullWidth,children:[Object(p.jsx)("span",{className:"text text_type_main-default gray-text",children:b}),Object(p.jsxs)("span",{className:it.a.quantity,children:[Object(p.jsx)("span",{className:"text text_type_main-default pr-1",children:j}),Object(p.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]})})};function dt(){return Object(p.jsx)("div",{className:ge.a.center,children:Object(p.jsx)(g,{children:Object(p.jsx)(ot,{}),hideCloseButton:!0})})}var ut=n(31),lt=["children"],jt=function(e){var t=e.children,n=Object(ut.a)(e,lt),r=w((function(e){return e.auth.user})),a=w((function(e){return e.auth.userLoaded})),c=Object(m.h)().state;return a?Object(p.jsx)(m.b,Object(xe.a)(Object(xe.a)({},n),{},{render:function(e){e.location;return r?Object(p.jsx)(m.a,{to:(null===c||void 0===c?void 0:c.from)?c.from.pathname:"/"}):t}})):Object(p.jsx)("div",{className:ge.a.formContainer,children:Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u0438\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})},mt=["children"],pt=function(e){var t=e.children,n=Object(ut.a)(e,mt),a=C(),c=w((function(e){return e.auth.user})),s=w((function(e){return e.auth.userLoaded})),i=function(){var e=Object(K.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(me());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){i()}),[]),s?Object(p.jsx)(m.b,Object(xe.a)(Object(xe.a)({},n),{},{render:function(e){var n=e.location;return c?t:Object(p.jsx)(m.a,{to:{pathname:"/login",state:{from:n}}})}})):Object(p.jsx)("div",{className:ge.a.formContainer,children:Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u0438\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})},bt=n(99),Ot=n.n(bt),ft=n(100),xt=n.n(ft),ht=n(101),_t=n.n(ht),gt=n(102),yt=n.n(gt),vt=n(50),Nt=n.n(vt),Ct=n(201),wt=function(e){var t=e.item,n=t._id,r=t.name,a=t.price,c=t.image,s=t.qty,i=Object(Ct.a)({type:"ingredient",item:Object(xe.a)({},t),collect:function(e){return{opacity:e.isDragging()?.5:1}}}),o=Object(he.a)(i,2),l=o[0].opacity,j=o[1],b=Object(m.h)();return Object(p.jsx)(u.b,{className:"link-drop-style",to:{pathname:"/ingredients/".concat(n),state:{background:b}},children:Object(p.jsxs)("div",{ref:j,className:Nt.a.general,style:{opacity:l},children:[Object(p.jsxs)("div",{className:Nt.a.info+" pr-4 pl-4",children:[Object(p.jsx)("img",{className:Nt.a.preventPointerEvent,alt:r,src:c}),Object(p.jsxs)("span",{className:"text text_type_digits-default mt-1 mb-1",children:[a,Object(p.jsx)(d.CurrencyIcon,{type:"primary"})]})]}),Object(p.jsx)("span",{className:"text text_type_main-default",children:r}),!!s&&Object(p.jsx)(d.Counter,{count:s,size:"default"})]})})},Et=n(104),St=function(e){var t=e.item,n=Object(N.b)(),a=t.id,c=t.title,s=t.ingredients,i=Object(Et.a)({threshold:[0,.25,.5,.75,1]}),o=i.ref,d=i.inView,u=i.entry;return Object(r.useEffect)((function(){n({type:W,id:a,ratio:u?u.intersectionRatio:0})}),[d,u,n]),Object(p.jsxs)("li",{ref:o,className:" mt-10 pb-10",children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:c}),Object(p.jsx)("div",{className:yt.a["section-list"]+" pt-6 pl-4 pr-4",children:s.map((function(e){return Object(p.jsx)(wt,{item:e},e._id)}))})]})},kt=function(e){var t=e.tabs,n=w((function(e){return e.ingredients})),r=n.ingredientsRequest,c=n.ingredients,s=n.ingredientsFailed,i=a.a.useMemo((function(){var e=[];return t.forEach((function(t,n){e.push({id:t.id,title:t.title,ingredients:c.filter((function(e){return e.type===t.id}))})})),e}),[t,c]);return Object(p.jsxs)(p.Fragment,{children:[r&&"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",s&&"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442\u043e\u0432",!r&&!s&&c.length&&Object(p.jsx)("ul",{className:_t.a.list+" scrollable",children:i.map((function(e){return Object(p.jsx)(St,{item:e},e.id)}))})]})},Tt=n(105),Rt=n.n(Tt),It=function(e){var t=e.tabs,n=w((function(e){return e.ingredients.tabs.reduce((function(e,t){return e.ratio<t.ratio?t:e}),e.ingredients.tabs[0]).id}));return Object(p.jsx)("div",{className:Rt.a.tabs+" mt-5",children:t.map((function(e){var t=e.id,r=e.title;return Object(p.jsx)(d.Tab,{onClick:function(e){},value:t,active:n===t,children:r},t)}))})};function Dt(){var e=w((function(e){return e.ingredients.tabs}));return Object(p.jsxs)("section",{className:xt.a.section,children:[Object(p.jsx)("p",{className:"text text_type_main-large mt-10 ",children:"\u0421\u043e\u0431\u0435\u0440\u0438 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(p.jsx)(It,{tabs:e}),Object(p.jsx)(kt,{tabs:e})]})}var Pt=n(76),Ft=n.n(Pt),Mt=n(106),qt=n.n(Mt),Lt=n(32),Ht=n.n(Lt),Bt=n(202),Ut=function(e){var t=e.item,n=e.index,a=e.moveCard,c=e.type,s=e.isLocked,i=t.id,o=C(),u=w((function(e){return e.ingredients.burgerComponents.optional})),l=Object(r.useRef)(null),j=Object(Bt.a)({accept:"component",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(l.current){var c=e.index,s=n;if(c!==s){var i=null===(r=l.current)||void 0===r?void 0:r.getBoundingClientRect(),o=(i.bottom-i.top)/2,d=t.getClientOffset().y-i.top;c<s&&d<o||c>s&&d>o||(a(c,s),e.index=s)}}}}),m=Object(he.a)(j,2),b=m[0].handlerId,O=m[1],f=Object(Ct.a)({type:"component",item:function(){return{id:i,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),x=Object(he.a)(f,2),h=x[0].isDragging,_=x[1],g=h?0:1;"bun"!==t.type&&_(O(l));return Object(p.jsxs)("div",{ref:l,style:{opacity:g},onDrop:function(e){return e.preventDefault()},className:Ht.a.wrapper,"data-handler-id":b,children:[Object(p.jsx)("div",{className:Ht.a.drag,children:Object(p.jsx)("span",{hidden:s,children:Object(p.jsx)(d.DragIcon,{type:"primary"})})}),Object(p.jsx)(d.ConstructorElement,{type:c,isLocked:s,text:t.name,price:t.price,thumbnail:t.image_mobile,handleClose:function(){return o({type:q,item:t,index:u.indexOf(t)})}})]})},At=n(107),zt=n.n(At),Wt=function(e){var t=e.data,n=Object(N.b)(),a=Object(r.useCallback)((function(e,r){var a=t[e];n({type:z,optional:zt()(t,{$splice:[[e,1],[r,0,a]]})})}),[t,n]);return Object(p.jsx)("ul",{className:qt.a.list+" scrollable",children:t.map((function(e,t){return Object(p.jsx)(Ut,{index:t,item:e,moveCard:a},e.id)}))})},Gt=n(108),Jt=n.n(Gt),Qt=function(){var e=w((function(e){return e.ingredients.ingredients.reduce((function(e,t){return t.qty?e+t.price*t.qty:e}),0)})),t=w((function(e){return e.ingredients.burgerComponents.bun})),n=w((function(e){return e.ingredients.ingredients.filter((function(e){return e.qty})).map((function(e){return e._id}))})),r=w((function(e){return e.auth.user})),a=C(),c=Object(m.g)();return Object(p.jsxs)("div",{className:Jt.a.wrap+" mt-5",children:[Object(p.jsxs)("span",{className:"text text_type_main-large",children:[e,Object(p.jsx)(d.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)("span",{className:"ml-10",children:Object(p.jsx)(d.Button,{type:"primary",size:"small",onClick:function(){if(!t)return a({type:U,message:"\u0414\u043b\u044f \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u0443\u043b\u043a\u0443"}),void a({type:L});r?a(function(e){return function(t){t({type:H}),t({type:L}),fetch(S,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+R("token")},body:JSON.stringify({ingredients:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw e}))})).then((function(e){t({type:B,order:e}),t({type:A})})).catch((function(e){t({type:U,message:e.message})}))}}(n)):c.push("/login")},children:Object(p.jsx)("span",{className:"text text_type_main-default",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})})]})},Yt=function(e){var t=e.item,n=e.type,r=e.isLocked;return Object(p.jsxs)("div",{className:Ht.a.wrapper,children:[Object(p.jsx)("div",{className:Ht.a.drag,children:Object(p.jsx)("span",{hidden:r,children:Object(p.jsx)(d.DragIcon,{type:"primary"})})}),Object(p.jsx)(d.ConstructorElement,{type:n,isLocked:r,text:"bottom"===n?t.name+" (\u043d\u0438\u0437)":t.name+" (\u0432\u0435\u0440\u0445)",price:t.price,thumbnail:t.image_mobile})]})},Vt=function(){var e=C(),t=w((function(e){return e.ingredients.burgerComponents})),n=t.bun,r=t.optional,a=Object(Bt.a)({accept:"ingredient",collect:function(e){return{isHover:e.isOver()}},drop:function(t){e({type:M,item:t})}}),c=Object(he.a)(a,2),s=c[0].isHover,i=c[1];return Object(p.jsxs)("section",{ref:i,className:"".concat(Ft.a.section," p-1 mt-25 mr-4 ml-4 ").concat(s?Ft.a.onHover:""),children:[n&&Object(p.jsx)(Yt,{item:n,isLocked:!0,type:"top"},"topbun"),Object(p.jsx)(Wt,{data:r}),n&&Object(p.jsx)(Yt,{item:n,isLocked:!0,type:"bottom"},"bottombun"),Object(p.jsx)(Qt,{})]})},Xt=n(200),Kt=n(110);function Zt(){return Object(p.jsx)("main",{className:Ot.a.main,children:Object(p.jsxs)(Xt.a,{backend:Kt.a,children:[Object(p.jsx)(Dt,{}),Object(p.jsx)(Vt,{})]})})}var $t=n(26),en=n.n($t),tn=function(e){var t=e.statistics,n=t.total,r=t.totalToday,a=t.readyOrders,c=t.inProgressOrders;return Object(p.jsxs)("div",{className:en.a.statisticsGrid,children:[Object(p.jsxs)("div",{className:en.a.readyOrders,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(p.jsx)("ul",{className:en.a.ordersList+" scrollable",children:a.map((function(e){return Object(p.jsx)("li",{className:"text text_type_digits-medium success-text",children:e},e)}))})]}),Object(p.jsxs)("div",{className:en.a.inProgressOrders,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(p.jsx)("ul",{className:en.a.ordersList+" scrollable",children:c.map((function(e){return Object(p.jsx)("li",{className:"text text_type_digits-medium",children:e},e)}))})]}),Object(p.jsxs)("div",{className:en.a.total,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f:"}),Object(p.jsx)("p",{className:"text text_type_digits-large",children:n})]}),Object(p.jsxs)("div",{className:en.a.totalToday,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(p.jsx)("p",{className:"text text_type_digits-large",children:r})]})]})};function nn(){var e=C(),t=w((function(e){return e.ws})),n=t.wsConnected,a=t.code,c=t.error,s=t.commonOrders,i=s.orders,o=s.statistics;return Object(r.useEffect)((function(){return e({type:Ge}),function(){e({type:Ve})}}),[e]),Object(p.jsxs)(p.Fragment,{children:[" ",n?Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("section",{className:ge.a.ordersFeedSection+" mt-10",children:[Object(p.jsx)("h2",{className:ge.a.title+" text text_type_main-large",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsx)("article",{className:ge.a.ordersCards,children:Object(p.jsx)(We,{orders:i})}),Object(p.jsx)("article",{className:ge.a.ordersStatistics,children:Object(p.jsx)(tn,{statistics:o})})]})}):a||c?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"}),Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u043a\u043e\u0434 \u043e\u0448\u0438\u0431\u043a\u0438"+a}),Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435: "+c})]}):Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]})}var rn=function(){var e,t=Object(m.h)(),n=Object(m.g)(),a="PUSH"===n.action?null===(e=t.state)||void 0===e?void 0:e.background:void 0,c=Object(r.useCallback)((function(e){e.stopPropagation(),n.goBack()}),[]),s=function(){return Object(p.jsx)(v,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(p.jsx)(rt,{}),closeHandler:c})},i=function(){return Object(p.jsx)(v,{children:Object(p.jsx)(ot,{}),closeHandler:c})};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(m.d,{location:a||t,children:[Object(p.jsx)(jt,{path:"/login",children:Object(p.jsx)(ye,{})}),Object(p.jsx)(jt,{path:"/register",exact:!0,children:Object(p.jsx)(ve,{})}),Object(p.jsx)(jt,{path:"/forgot-password",children:Object(p.jsx)(Ne,{})}),Object(p.jsx)(m.b,{path:"/reset-password",children:Object(p.jsx)(Ce,{})}),Object(p.jsx)(pt,{path:"/profile/:category?",exact:!0,children:Object(p.jsx)(et,{})}),Object(p.jsx)(m.b,{path:"/ingredients/:id",exact:!0,children:Object(p.jsx)(at,{})}),Object(p.jsx)(m.b,{path:"/feed",exact:!0,children:Object(p.jsx)(nn,{})}),Object(p.jsx)(m.b,{path:["/feed/:id","/profile/orders/:id"],exact:!0,children:Object(p.jsx)(dt,{})}),Object(p.jsx)(m.b,{path:"/",exact:!0,children:Object(p.jsx)(Zt,{})}),Object(p.jsx)(m.b,{children:Object(p.jsx)(ct,{})})]}),a&&Object(p.jsx)(m.b,{path:"/ingredients/:id",children:Object(p.jsx)(s,{})}),a&&Object(p.jsx)(m.b,{path:["/feed/:id","/profile/orders/:id"],children:Object(p.jsx)(i,{})})]})},an=function(){var e=w((function(e){return e.ingredients.showOrderModal})),t=w((function(e){return e.auth.showMessage})),n=C(),r=a.a.useCallback((function(){n({type:L,order:null})}),[n]),c=a.a.useCallback((function(){n({type:ue})}),[n]),s=a.a.useMemo((function(){return Object(p.jsx)(v,{children:Object(p.jsx)(E,{}),closeHandler:r})}),[r]),i=a.a.useMemo((function(){return Object(p.jsx)(v,{children:Object(p.jsx)(Oe,{}),closeHandler:c})}),[c]);return a.a.useEffect((function(){n((function(e){return e({type:D}),fetch("https://norma.nomoreparties.space/api/ingredients").then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(t){var n=t.data;return e({type:P,items:n})})).catch((function(t){e({type:F})}))})),n(me())}),[]),Object(p.jsxs)(u.a,{children:[Object(p.jsx)(O,{}),Object(p.jsx)(rn,{}),e&&s,t&&i]})},cn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,203)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},sn=n(24),on=n(109),dn=n(78),un={tabs:[{id:"bun",title:"\u0411\u0443\u043b\u043a\u0438",ratio:0},{id:"sauce",title:"\u0421\u043e\u0443\u0441\u044b",ratio:0},{id:"main",title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ratio:0}],currentTab:void 0,ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1,burgerComponents:{bun:void 0,optional:[]},orderRequest:!1,orderFailed:!1,orderFailedMessage:"",currentOrder:void 0,orderNumber:void 0,showOrderModal:!1,openedOrder:{openOrderRequest:!1,openOrderFailed:!1,openOrderFailedMessage:"",order:void 0}},ln={user:void 0,changingPassword:!1,userLoaded:!1,showMessage:!1,authMessage:""},jn={wsConnected:!1,code:"",error:"",commonOrders:{orders:[],statistics:{total:0,totalToday:0,readyOrders:[],inProgressOrders:[]}},userOrders:void 0},mn=Object(sn.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:un,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(xe.a)(Object(xe.a)({},e),{},{ingredientsRequest:!0,ingredientsFailed:!1});case P:return Object(xe.a)(Object(xe.a)({},e),{},{ingredientsRequest:!1,ingredients:t.items});case F:return Object(xe.a)(Object(xe.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!0});case M:if("bun"===t.item.type)return Object(xe.a)(Object(xe.a)({},e),{},{ingredients:e.ingredients.map((function(n){return n._id===t.item._id?Object(xe.a)(Object(xe.a)({},n),{},{qty:2}):e.burgerComponents.bun&&n._id===e.burgerComponents.bun._id?Object(xe.a)(Object(xe.a)({},n),{},{qty:0}):n})),burgerComponents:Object(xe.a)(Object(xe.a)({},e.burgerComponents),{},{bun:t.item})});var n=e.ingredients.find((function(e){return e._id===t.item._id}));return(null===n||void 0===n?void 0:n.qty)?Object(xe.a)(Object(xe.a)({},e),{},{ingredients:e.ingredients.map((function(e){return e._id===t.item._id?Object(xe.a)(Object(xe.a)({},e),{},{qty:e.qty?++e.qty:1}):e})),burgerComponents:Object(xe.a)(Object(xe.a)({},e.burgerComponents),{},{optional:[].concat(Object(dn.a)(e.burgerComponents.optional),[Object(xe.a)(Object(xe.a)({},t.item),{},{id:t.item._id+e.burgerComponents.optional.length})])})}):Object(xe.a)(Object(xe.a)({},e),{},{ingredients:e.ingredients.map((function(e){return e._id===t.item._id?Object(xe.a)(Object(xe.a)({},e),{},{qty:1}):e})),burgerComponents:Object(xe.a)(Object(xe.a)({},e.burgerComponents),{},{optional:[].concat(Object(dn.a)(e.burgerComponents.optional),[Object(xe.a)(Object(xe.a)({},t.item),{},{id:t.item._id+e.burgerComponents.optional.length})])})});case q:return"bun"===t.item.type?Object(xe.a)(Object(xe.a)({},e),{},{ingredients:e.ingredients.map((function(e){return e._id===t.item._id?Object(xe.a)(Object(xe.a)({},e),{},{qty:0}):e})),burgerComponents:Object(xe.a)(Object(xe.a)({},e.burgerComponents),{},{bun:void 0})}):Object(xe.a)(Object(xe.a)({},e),{},{ingredients:e.ingredients.map((function(e){return e._id===t.item._id?Object(xe.a)(Object(xe.a)({},e),{},{qty:e.qty?--e.qty:0}):e})),burgerComponents:Object(xe.a)(Object(xe.a)({},e.burgerComponents),{},{optional:e.burgerComponents.optional.filter((function(e,n){return n!==t.index})).map((function(e,t){return Object(xe.a)(Object(xe.a)({},e),{},{id:e._id+t})}))})});case L:return Object(xe.a)(Object(xe.a)({},e),{},{showOrderModal:!e.showOrderModal});case A:return Object(xe.a)(Object(xe.a)({},e),{},{burgerComponents:un.burgerComponents,ingredients:e.ingredients.map((function(e){return Object(xe.a)(Object(xe.a)({},e),{},{qty:0})}))});case H:return Object(xe.a)(Object(xe.a)({},e),{},{orderRequest:!0,orderFailed:!1,currentOrder:void 0,orderNumber:void 0,orderFailedMessage:void 0});case B:return Object(xe.a)(Object(xe.a)({},e),{},{orderRequest:!1,currentOrder:t.order,orderNumber:t.order?t.order.order.number:void 0});case U:return Object(xe.a)(Object(xe.a)({},e),{},{orderRequest:!1,orderFailed:!0,orderFailedMessage:t.message});case z:return Object(xe.a)(Object(xe.a)({},e),{},{burgerComponents:Object(xe.a)(Object(xe.a)({},e.burgerComponents),{},{optional:t.optional})});case W:return Object(xe.a)(Object(xe.a)({},e),{},{tabs:e.tabs.map((function(e){return e.id===t.id?Object(xe.a)(Object(xe.a)({},e),{},{ratio:t.ratio}):e}))});case G:return Object(xe.a)(Object(xe.a)({},e),{},{openedOrder:{openOrderRequest:!0,openOrderFailed:!1,openOrderFailedMessage:"",order:void 0}});case Q:return Object(xe.a)(Object(xe.a)({},e),{},{openedOrder:Object(xe.a)(Object(xe.a)({},e.openedOrder),{},{openOrderRequest:!1,openOrderFailed:!0,openOrderFailedMessage:t.message})});case J:return Object(xe.a)(Object(xe.a)({},e),{},{openedOrder:Object(xe.a)(Object(xe.a)({},e.openedOrder),{},{openOrderRequest:!1,openOrderFailed:!1,order:t.order})});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(xe.a)(Object(xe.a)({},e),{},{user:t.user});case ie:return Object(xe.a)(Object(xe.a)({},e),{},{changingPassword:!e.changingPassword});case oe:return Object(xe.a)(Object(xe.a)({},e),{},{userLoaded:!1});case de:return Object(xe.a)(Object(xe.a)({},e),{},{userLoaded:!0});case ue:return Object(xe.a)(Object(xe.a)({},e),{},{showMessage:!e.showMessage,authMessage:t.message});case le:return Object(xe.a)(Object(xe.a)({},e),{},{authMessage:t.message});default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:case Je:return jn;case Qe:return Object(xe.a)(Object(xe.a)({},e),{},{wsConnected:!0,code:"",error:""});case Ye:return Object(xe.a)(Object(xe.a)({},e),{},{wsConnected:!1,error:t.error});case Xe:return Object(xe.a)(Object(xe.a)({},e),{},{wsConnected:!1,code:t.code});case Ke:return Object(xe.a)(Object(xe.a)({},e),{},{commonOrders:{orders:t.payload.orders,statistics:{total:t.payload.total,totalToday:t.payload.totalToday,readyOrders:t.payload.orders.filter((function(e){return e.status&&"done"===e.status})).map((function(e){return e.number})),inProgressOrders:t.payload.orders.filter((function(e){return e.status&&"done"!==e.status})).map((function(e){return e.number}))}}});case Ze:return Object(xe.a)(Object(xe.a)({},e),{},{userOrders:t.payload});default:return e}}}),pn=["success"];function bn(e,t,n){return function(r){var a;return function(c){return function(s){var i=r.dispatch,o=s.type,d=t.wsInit,u=t.wsOpened,l=t.wsClose,j=t.wsClosed,m=t.wsError,p=t.wsMessage;a&&o===l&&a.close(),o===d&&(n&&(e+="?token=".concat(R("token"))),a=new WebSocket(e)),a&&(a.onopen=function(e){i({type:u})},a.onerror=function(e){i({type:m})},a.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(ut.a)(n,pn));r&&r.message?i({type:m,error:r.message}):i({type:p,payload:r})},a.onclose=function(e){e.wasClean||i({type:j,code:{code:e.code}})}),c(s)}}}}var On=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||sn.c,fn={wsOpened:Qe,wsClose:Ve,wsClosed:Xe,wsError:Ye},xn=Object(xe.a)(Object(xe.a)({},fn),{},{wsInit:Ge,wsMessage:Ke}),hn=Object(xe.a)(Object(xe.a)({},fn),{},{wsInit:Je,wsMessage:Ze}),_n=On(Object(sn.a)(on.a,bn(T+"/all",xn),bn(T,hn,!0))),gn=Object(sn.d)(mn,_n);s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(N.a,{store:gn,children:Object(p.jsx)(an,{})})}),document.getElementById("root")),cn()},26:function(e,t,n){e.exports={readyOrders:"orders-statistic_readyOrders__1C3iR",inProgressOrders:"orders-statistic_inProgressOrders__1m5Bb",total:"orders-statistic_total__3677U",totalToday:"orders-statistic_totalToday__3Jkz7",statisticsGrid:"orders-statistic_statisticsGrid__bAkah",ordersList:"orders-statistic_ordersList__1UhKv"}},32:function(e,t,n){e.exports={wrapper:"constructor-el-wrapper_wrapper__i9-Br",drag:"constructor-el-wrapper_drag__3QhrF"}},33:function(e,t,n){e.exports={header:"order-ingredients_header__3YVg2",footer:"order-ingredients_footer__3RE9W",imgContainer:"order-ingredients_imgContainer__kC58D",imgsList:"order-ingredients_imgsList__1dPwt",rest:"order-ingredients_rest__3Ewqm",notLast:"order-ingredients_notLast__2VboY"}},41:function(e,t,n){e.exports={nav:"app-header_nav__J70vf",navItem:"app-header_navItem__c9nIn",navContainer:"app-header_navContainer__2LWSU",logo:"app-header_logo__25FNI"}},42:function(e,t,n){e.exports={wrap:"modal-content_wrap__3_308",modal:"modal-content_modal__1UizU",modalHead:"modal-content_modalHead__symqp",modalHeadWithClose:"modal-content_modalHeadWithClose__3S85q",modalHeadTitle:"modal-content_modalHeadTitle__3jBAL"}},5:function(e,t,n){e.exports={formContainer:"login_formContainer__1zXg3",main:"login_main__3fdjd",navColumn:"login_navColumn__319vy",contentSection:"login_contentSection___fcKo",navContainer:"login_navContainer__28OPq",autoFit:"login_autoFit__1VowN",form:"login_form__3uX_1",buttomButton:"login_buttomButton__26JWx",link:"login_link__1HgKr",unselected:"login_unselected__2-yzQ",center:"login_center__1EPNJ",pointer:"login_pointer__3Cp0d",title:"login_title__1v7qF",ordersStatistics:"login_ordersStatistics__25lx-",ordersCards:"login_ordersCards__U3DS6",ordersFeedSection:"login_ordersFeedSection__128-7"}},50:function(e,t,n){e.exports={general:"ingredients-list-item_general__83-Cp",info:"ingredients-list-item_info__2Jxki",cost:"ingredients-list-item_cost__2hQwK",preventPointerEvent:"ingredients-list-item_preventPointerEvent__2klwv"}},69:function(e,t,n){e.exports={link:"nav-item_link__17WDU",unselected:"nav-item_unselected__1gHEA"}},72:function(e,t,n){e.exports={buttonContainer:"profile-form_buttonContainer__7Q4ND",form:"profile-form_form__2HP_l"}},73:function(e,t,n){e.exports={mainContainer:"order-card_mainContainer__3mqnX",header:"order-card_header__1JwVE",footer:"order-card_footer__1GzU9",imgContainer:"order-card_imgContainer__3tMuB",imgsList:"order-card_imgsList__3R3td",rest:"order-card_rest__23WMB",notLast:"order-card_notLast__cra0k"}},76:function(e,t,n){e.exports={section:"burger-constructor_section__28-3I",onHover:"burger-constructor_onHover__Tgs-J"}},96:function(e,t,n){e.exports={overlay:"modal_overlay__1zMIM"}},97:function(e,t,n){e.exports={ordersList:"orders-list_ordersList__1Q25C"}},98:function(e,t,n){e.exports={composition:"ingredient-details_composition__1eHdq"}},99:function(e,t,n){e.exports={main:"main_main__2YE_-"}}},[[195,1,2]]]);
//# sourceMappingURL=main.a576cf6c.chunk.js.map